{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["import { server as electronConnectServer } from 'electron-connect';\r\n\r\nconst TARGET = {\r\n    main: 'electron-main',\r\n    renderer: 'electron-renderer'\r\n};\r\nconst AVAILABLE_TARGETS = [TARGET.main, TARGET.renderer];\r\n\r\nfunction createElectronReloadWebpackPlugin(options = {}) {\r\n    let server = null;\r\n\r\n    function restartOrReloadServer(targetType, server) {\r\n        if (targetType === TARGET.main) {\r\n            server.restart();\r\n        } else {\r\n            server.reload();\r\n        }\r\n    }\r\n\r\n    function applyCompiler(userTargetType) {\r\n        return {\r\n            apply(compiler) {\r\n                const configTarget = AVAILABLE_TARGETS.find(target => target === compiler.options.target);\r\n                const targetType = userTargetType || configTarget || TARGET.main;\r\n\r\n                compiler.hooks.done.tap('ElectronReloadWebpackPlugin', () => {\r\n                    if (!server) {\r\n                        server = electronConnectServer.create(options);\r\n                        server.start();\r\n                    } else {\r\n                        restartOrReloadServer(targetType, server);\r\n                    }\r\n                });\r\n            }\r\n        };\r\n    }\r\n\r\n    return target => {\r\n        if (target && !AVAILABLE_TARGETS.includes(target)) {\r\n            console.log(\r\n                `\\nElectronReloadWebpackPlugin: Specified target should be one of \"${AVAILABLE_TARGETS.join(\r\n                    ' | '\r\n                )}\". You passed \"${target}\"`\r\n            );\r\n            console.log(`ElectronReloadWebpackPlugin: Using default target \"${TARGET.main}\"`);\r\n\r\n            return applyCompiler(TARGET.main);\r\n        } else {\r\n            return applyCompiler();\r\n        }\r\n    };\r\n}\r\n\r\nexport default createElectronReloadWebpackPlugin;\r\n"],"names":["const","let","electronConnectServer"],"mappings":";;AAEAA,IAAM,SAAS;IACX,MAAM,eADK;IAEX,UAAU;;AAEdA,IAAM,oBAAoB,CAAC,MAAA,CAAO,KAAM,MAAA,CAAO;AAE/C,SAAS,kCAAkC,SAAc;qCAAd,GAAU;;IACjDC,IAAI,SAAS;IAEb,SAAS,sBAAsB,UAAY,EAAA,QAAQ;QAC/C,IAAI,UAAA,KAAe,MAAA,CAAO,MAAM;YAC5B,MAAA,CAAO,OAAP;eACG;YACH,MAAA,CAAO,MAAP;;;;IAIR,SAAS,cAAc,gBAAgB;QACnC,OAAO;YACH,sBAAM,UAAU;gBACZD,IAAM,eAAe,iBAAA,CAAkB,IAAlB,WAAuB,iBAAU,MAAA,KAAW,QAAA,CAAS,OAAT,CAAiB;gBAClFA,IAAM,aAAa,cAAA,IAAkB,YAAlB,IAAkC,MAAA,CAAO;gBAE5D,QAAA,CAAS,KAAT,CAAe,IAAf,CAAoB,GAApB,CAAwB,2CAA+B;oBACnD,IAAI,CAAC,QAAQ;wBACT,MAAA,GAASE,sBAAA,CAAsB,MAAtB,CAA6B;wBACtC,MAAA,CAAO,KAAP;2BACG;wBACH,qBAAA,CAAsB,YAAY;;;;;;;IAOtD,iBAAO;QACH,IAAI,MAAA,IAAU,CAAC,iBAAA,CAAkB,QAAlB,CAA2B,SAAS;YAC/C,OAAA,CAAQ,GAAR,2EACyE,iBAAA,CAAkB,IAAlB,CACjE,gCACe;YAEvB,OAAA,CAAQ,GAAR,4DAAkE,MAAA,CAAO;YAEzE,OAAO,aAAA,CAAc,MAAA,CAAO;eACzB;YACH,OAAO,aAAA;;;;;;;"}